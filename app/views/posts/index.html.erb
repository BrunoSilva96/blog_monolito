<%= render 'layouts/shared/header' %>

<div class="container mt-5">
  <div class="row align-items-cennter">
    <% if user_signed_in?%>
      <div class="col-md-6 p-md-4 offset-md-3 border-5 rounded-5 bg-info">
        <h4>Compartilhe suas ideias e momentos!</h4>
        <%= form_with model: @post do |form| %>
            <div class="form-floating mb-2" style='height: 150px;'>
              <%= form.text_area :text, class: "form-control", 
                                        id: "floatingTextArea", 
                                        aria_describedby: "button-addon1",  
                                        style: "height: 150px;", 
                                        placeholder: "O que você está pensando?" %>
              <%= form.label :text, "O que você está pensando?", class: "form-label", for: "floatingTextArea" %>
            </div>
            <input type="file" class="form-control-file px-2">
            <%= form.submit 'Publicar', class: "btn btn-outline-dark mb-1 px-5 mt-3 m-5", id: "button-addon1" %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

<% @posts.each do |post| %>
  <div class="card mt-5 col-md-4 mx-auto col-lg-9 ">
    <div class="card-header bg-info"> Publicado Por: <strong> <%= post.user.name %> </strong> </div>
      <div class="card-body">
        <p>Aqui vai a foto do meliante</p>
        <div class="card-body" ><%= post.text %></div>
        <div class="d-grid gap-1 d-md-flex justify-content-md-end">
        <% if user_post_delete?(post, current_user) %>
          <%= button_to 'Delete', posts_path(post), method: :delete, class: "btn btn-outline-danger" %>
          <%= link_to 'Edit', posts_path(post), method: :post, class: "btn btn-outline-success" %>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<div class="pagination justify-content-center mt-5 py-5">
  <%= paginate @posts %>
</div>